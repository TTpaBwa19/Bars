<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BarsIQ</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #0f0f1a;
            color: white;
            text-align: center;
        }

        .top-players {
            margin-top: 20px;
        }

        table {
            width: 80%;
            margin: 20px auto;
            border-collapse: collapse;
            color: #fff;
            background-color: #2e2e40;
        }

        table, th, td {
            border: 1px solid #555;
        }

        th, td {
            padding: 10px;
        }

        th {
            background-color: #444;
        }

        td {
            text-align: center;
        }

        .loading {
            font-size: 24px;
            color: #32c4ff;
        }
    </style>
</head>
<body>

    <h1>üèÜ –†–µ–π—Ç–∏–Ω–≥ BarsIQ</h1>
    <div id="leaderboard-container">
        <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞
        async function fetchLeaderboard() {
            try {
                // –ó–∞–ø—Ä–æ—Å –∫ API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
                const response = await fetch("http://127.0.0.1:5000/leaderboard");
                const leaderboardData = await response.json();

                if (leaderboardData.length === 0) {
                    document.getElementById('leaderboard-container').innerHTML = "<p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∏–≥—Ä–æ–∫–∞—Ö</p>";
                    return;
                }

                // –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Å –¥–∞–Ω–Ω—ã–º–∏
                let tableHTML = `
                    <table>
                        <thead>
                            <tr>
                                <th>–†–∞–Ω–≥</th>
                                <th>ID –ò–≥—Ä–æ–∫–∞</th>
                                <th>–ú–æ–Ω–µ—Ç—ã</th>
                            </tr>
                        </thead>
                        <tbody>
                `;

                // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ç–∞–±–ª–∏—Ü—É –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ API
                leaderboardData.forEach((player, index) => {
                    tableHTML += `
                        <tr>
                            <td>${index + 1}</td>
                            <td>${player.user_id}</td>
                            <td>${player.coins}</td>
                        </tr>
                    `;
                });

                tableHTML += "</tbody></table>";

                // –í—Å—Ç–∞–≤–ª—è–µ–º —Ç–∞–±–ª–∏—Ü—É –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
                document.getElementById('leaderboard-container').innerHTML = tableHTML;
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö:", error);
                document.getElementById('leaderboard-container').innerHTML = "<p>–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.</p>";
            }
        }

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–µ–π—Ç–∏–Ω–≥ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        fetchLeaderboard();
    </script>

</body>
</html>

